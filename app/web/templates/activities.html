{% extends "layout.html" %}
{% block title %}Activities{% endblock %}
{% block pagename %}Latest activities{% endblock %}
{% block head %}
  {{ super() }}
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.0.min.js"></script>
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-gl-2.4.0.min.js"
        crossorigin="anonymous"></script>
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.0.min.js"
        crossorigin="anonymous"></script>
{% endblock %}
{% block content %}
<p>
<form>
<label for="date_min">From</label>
<input type="date" name="date_min" id="date_min" value="{{ date_min }}">
<label for="date_min">To</label>
<input type="date" name="date_max" id="date_max" value="{{ date_max }}">
<input type="submit" value="Reload">
</form>
</p>
  {{ history_div|safe }}
  {{ history_script|safe }}
<table class="table">
  <thead>
    <tr>
      <th>date</th>
      <th>time</th>
      <th>name</th>
      <th>sport</th>
      <th>sub-sport</th>
      <th>duration</th>
      <th>distance</th>
      <th>hr</th>
      <th>spm</th>
    </tr>
  </thead>
  <tbody>
    {% for activity, summary in zip(activities, summaries) %}
    <tr>
      <td>{{ activity.datetime_start.date()|ignore_none }}</td>
      <td>{{ activity.datetime_start.time()|ignore_none }}</td>
      <td>
        <a href={{ url_for("view_activity", id_=activity.id) }}>
          {{ activity.name if activity.name is not none else "unnamed" }}
        </a>
      </td>
      <td>{{ activity.sport|ignore_generic }}</td>
      <td>{{ activity.sub_sport|ignore_generic }}</td>
      <td>{{ summary.duration|seconds_to_dhms|ignore_none }}</td>
      <td>{{ summary.distance|meters_to_km|ignore_none }}</td>
      <td>{{ summary.heart_rate|ignore_none }}</td>
      <td>{{ summary.step_rate|ignore_none }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
